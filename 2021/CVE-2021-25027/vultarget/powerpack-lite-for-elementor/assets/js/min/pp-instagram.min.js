!function(t){PPInstagramFeed=function(e){this.id=e.id,this.username="undefined"!=typeof e.username?e.username:"",this.byHashtag="undefined"!=typeof e.byHashtag&&e.byHashtag,this.hashtag="undefined"!=typeof e.hashtag?e.hashtag:"",this.settings=e,this.host="https://www.instagram.com/",this.node=t(".elementor-element-"+this.id),this.wrapper=this.node.find("#pp-instafeed-"+this.id),this._data=!1,this._swiper={},this._messages=ppInsta,this._init()},PPInstagramFeed.prototype={_data:!1,_swiper:{},_init:function(){if(""===this.username&&!this.settings.isBuilderActive)return this._handleEmptyWidget(),void console.error("PP Instagram Feed ("+this.id+"): No username provided.");var e=this.host+this.username+"/";this._getData(e,t.proxy(this._renderData,this))},_getData:function(e,t){var i,s;this._data&&"function"==typeof t?t(this._data):(i=this,(s=new XMLHttpRequest).open("GET",e),s.send(null),s.onreadystatechange=function(){var e;4==s.readyState&&(200==s.status?"function"==typeof t&&(e=i._processData(s.responseText),t(e)):(i.node.append('<div class="pp-instagram-warning">'+i._messages.invalid_username+"</div>"),console.error("PP Instagram Feed ("+i.id+"): Unable to fetch the given user. Instagram responded with the status code: ",s.status)))})},_processData:function(e){return e=e.split("window._sharedData = ")[1].split("<\/script>")[0],e=(e=(e=JSON.parse(e.substr(0,e.length-1))).entry_data.ProfilePage||e.entry_data.TagPage)[0].graphql.user||e[0].graphql.hashtag,this._data=e},_renderData:function(e){var t="",i="pp-feed-item";if("carousel"===this.settings.layout&&(i+=" swiper-slide"),e.is_private)this.node.append('<div class="pp-instagram-warning">'+this._messages.private_account+"</div>");else{var s=(e.edge_owner_to_timeline_media||e.edge_hashtag_to_media).edges;if(s.length<1)return void this.node.append('<div class="pp-instagram-warning">'+this._messages.no_images+this.username+"</b></div>");for(var a=s.length>this.settings.limit?this.settings.limit:s.length,n=0;n<a;n++){var o,r,d="https://www.instagram.com/p/"+s[n].node.shortcode,h="",p=s[n].node.edge_liked_by.count,g=s[n].node.edge_media_to_comment.count;switch(s[n].node.__typename){case"GraphSidecar":r="sidecar",o=s[n].node.thumbnail_resources[4].src;break;case"GraphVideo":r="video",o=s[n].node.thumbnail_src;break;default:r="image",o=s[n].node.thumbnail_resources[4].src}image="image"==r&&"square-grid"!==this.settings.layout?s[n].node.display_url:o,0<s[n].node.edge_media_to_caption.edges.length&&(h=s[n].node.edge_media_to_caption.edges[0].node.text),t+='<div class="'+i+'">',t+='<div class="pp-feed-item-inner">',"1"!=this.settings.popup&&"1"!=this.settings.image_link||("1"==this.settings.popup?t+='<a href="'+s[n].node.display_url+'" target="_blank" rel="nofollow noopener" data-elementor-open-lightbox="yes" data-elementor-lightbox-slideshow="pp-ig-'+this.id+'">':"1"==this.settings.image_link&&(t+='<a href="'+d+'" target="_blank" rel="nofollow noopener">')),t+='<div class="pp-if-img">',t+='<div class="pp-overlay-container pp-media-overlay">',this.settings.likes_count&&(t+='<span class="likes"><i class="pp-if-icon fa fa-heart"></i> '+p+"</span>"),this.settings.comments_count&&(t+='<span class="comments"><i class="pp-if-icon fa fa-comment"></i> '+g+"</span>"),t+="</div>",t+='<img src="'+image+'" alt="'+h+'" />',t+="</div>","1"!=this.settings.popup&&"1"!=this.settings.image_link||(t+="</a>"),t+="</div>",t+="</div>",t+="</div>"}}this.wrapper.html(t),"carousel"===this.settings.layout?this._initCarousel():"masonry"===this.settings.layout?this._initMasonry():this._initGrid()},_initGrid:function(){t("#pp-instafeed-"+this.id).imagesLoaded(function(){})},_initMasonry:function(){var e=t("#pp-instafeed-"+this.id).imagesLoaded(function(){e.masonry({itemSelector:".pp-feed-item",percentPosition:!0})})},_initCarousel:function(){this._swiper=new Swiper(".elementor-element-"+this.id+" .pp-instagram-feed-carousel .swiper-container",this.settings.carousel)}}}(jQuery);