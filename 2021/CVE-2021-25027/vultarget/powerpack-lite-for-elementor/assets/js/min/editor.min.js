!function(e){var t=e.modules.controls.Select2.extend({cache:null,isTitlesReceived:!1,getSelect2Placeholder:function(){return{id:"",text:this.model.get("placeholder")||"All"}},getSelect2DefaultOptions:function(){var n=this;return jQuery.extend(e.modules.controls.Select2.prototype.getSelect2DefaultOptions.apply(this,arguments),{ajax:{transport:function(e,t,o){e={q:e.data.q,query_type:n.model.get("query_type"),query_options:n.model.get("query_options"),object_type:n.model.get("object_type")};return elementorCommon.ajax.addRequest("pp_query_control_filter_autocomplete",{data:e,success:t,error:o})},data:function(e){return{q:e.term,page:e.page}},cache:!0},escapeMarkup:function(e){return e},minimumInputLength:1})},getValueTitles:function(){var t=this,e=this.getControlValue(),o=this.model.get("query_type"),n=this.model.get("query_options"),i=this.model.get("object_type");e&&o&&(_.isArray(e)||(e=[e]),elementorCommon.ajax.loadObjects({action:"pp_query_control_value_titles",ids:e,data:{query_type:o,query_options:n,object_type:i,unique_id:""+t.cid+o},success:function(e){t.isTitlesReceived=!0,t.model.set("options",e),t.render()},before:function(){t.addSpinner()}}))},addSpinner:function(){this.ui.select.prop("disabled",!0),this.$el.find(".elementor-control-title").after('<span class="elementor-control-spinner ee-control-spinner">&nbsp;<i class="fa fa-spinner fa-spin"></i>&nbsp;</span>')},onReady:function(){setTimeout(e.modules.controls.Select2.prototype.onReady.bind(this)),this.isTitlesReceived||this.getValueTitles()},onBeforeDestroy:function(){this.ui.select.data("select2")&&this.ui.select.select2("destroy"),this.$el.remove()}});e.addControlView("pp-query",t)}(elementor,(jQuery,window));